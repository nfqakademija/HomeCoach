{% extends 'base3.html.twig' %}

{% block content %}
    <h1>{{ regime.title }}</h1>
    <div class="row">

        <div class="col-md-5">
            Sukurta: {{ regime.dataCreated.format('H:i:s Y-m-d') }}
            <br><br>
            Siuo metu programa aktyvave {{ regime.activations|length }} zmones!
            {% include 'AppBundle:Home:activateRegime.html.twig' with {'form': activateForm} only %}
        </div>

        <div class="col-md-7">
            <div class="center-block">
                {{ regime.difficulty | difficulty  }}
            </div>
        </div>
    </div>
    <textarea readonly rows="6" class="form-control readonly"> {{ regime.description }} </textarea>
    <h2 class="description"> Programos tvarkaraštis</h2>
    <ul class="nav nav-pills radios">
        <li class="active"><a data-toggle="pill" href="#day1">Pirm.</a></li>
        <li><a data-toggle="pill" href="#day2">Antr.</a></li>
        <li><a data-toggle="pill" href="#day3">Treč.</a></li>
        <li><a data-toggle="pill" href="#day4">Ketv.</a></li>
        <li><a data-toggle="pill" href="#day5">Penkt.</a></li>
        <li><a data-toggle="pill" href="#day6">Šešt.</a></li>
        <li><a data-toggle="pill" href="#day7">Sekm.</a></li>
    </ul>
    <div class="tab-content" id="form_schedule">
        <div id="day1" class="tab-pane fade in active">
            {% if regime.schedule[0] != null %}
                <textarea rows="4" readonly="readonly" class="form-control"> {{ regime.schedule[0] }} </textarea>
            {% else %}
                <textarea rows="4" readonly="readonly" class="form-control"> Ši diena laisva </textarea>
            {% endif %}
        </div>
        {% for i in 1..6 %}
            <div id="day{{ i+1 }}" class="tab-pane fade">
                {% if regime.schedule[i] != null %}
                    <textarea rows="4" readonly="readonly" class="form-control"> {{ regime.schedule[i] }} </textarea>
                {% else %}
                    <textarea rows="4" readonly="readonly" class="form-control"> Ši diena laisva </textarea>
                {% endif %}
            </div>
        {% endfor %}
    </div>
    {% if app.user is not null %}
        <h2 class="description"> Įvertinkite programą </h2>
        {% if app.user is not null %}
        Tavo ivertinimas: {{ regime.userRating(app.user.id) }}
        {% endif %}
        <br>
        <p>Programos reitingas: {{ regime.rating }}</p>
        {{ form_start(formRate, {'attr':{'id':'rating'}}) }}
        <div class="rating">
            {{ form_widget(formRate.rating.4, {'attr':{'class':'radio_item'}}) }}
            {{ form_widget(formRate.rating.3, {'attr':{'class':'radio_item'}}) }}
            {{ form_widget(formRate.rating.2, {'attr':{'class':'radio_item'}}) }}
            {{ form_widget(formRate.rating.1, {'attr':{'class':'radio_item'}}) }}
            {{ form_widget(formRate.rating.0, {'attr':{'class':'radio_item'}}) }}

            {% for i in [4,3,2,1,0] %}
                <label id="{{ i+1 }}" class="label_item {% if regime.userRating(app.user.id) > i %} coloredStar {% endif %}" for="form_rating_{{ i }}"> <span>&#9734</span> </label>
            {% endfor %}
        </div>
        {{ form_end(formRate) }}
        <br>
    {% endif %}

    {% if regime.comments|length > 0 %}
        <h2 class="description"> Komentarai <span class="badge alert-info">{{ regime.comments|length }}</span></h2>
        {% include "AppBundle:Home:showComment.html.twig" with {'comments': regime.comments} only %}
    {% else %}
        <h2 class="description"> Komentarų dar nėra </h2>
    {% endif %}

    {% if app.user is not null %}
    {{ form_start(form) }}
    {{ form_widget(form.comment, {'attr':{'class':'form-control', 'rows':4, 'placeholder':'Parašykite savo komentarą'}}) }}
        {{ form_widget(form.save, {'attr':{'class':'submitConfirmed'}}) }}
    {{ form_end(form) }}
        {% endif %}
{% endblock %}